#!/usr/bin/env python

import sys
import subprocess

# build all possible (according project file)
def all():
	print("Building ALL")
	subprocess.call(["python", "-B", "waf", "all"])

# build specific (with specified arguments)
def build(args):
	print("Building")
	subprocess.call(["python", "-B", "waf", "build"] + args)

# clean
def clean():
	print("Cleaning")
	subprocess.call(["python", "-B", "waf", "distclean", "configure"])

# distclean
def distclean():
	print("Dist Cleaning")
	subprocess.call(["python", "-B", "waf", "distclean"])

# commit build (all) to specific repository (according project file)
def release():
	print("Releasing")
	# 1. if release with message -> we commit the repo with the message, then 2.
	# 2. build and commit build with the last repo commit hash
	# always true, the repo status should be left nothing to commit (or throw error)

# update deps and git
def update():
	print("Updating")

def about():
	print("=== Golem C++ Build System ===")

def invalid_command(arg):
	print(arg + " : Invalid command")

about()

if len(sys.argv) < 2:
	sys.exit(0)

arg = sys.argv[1]

if arg == 'all':
	all()
elif arg == 'build':
	build(sys.argv[2:])
elif arg == 'clean': 
	clean()
elif arg == 'release': 
	release()
elif arg == 'update': 
	update()
elif arg == 'distclean': 
	distclean()
else:
	invalid_command(arg)